<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - test/mjsunit/switch.js</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">test/mjsunit</a> - switch.js<span style="font-size: 80%;"> (source / <a href="switch.js.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">514</td>
            <td class="headerCovTableEntry">518</td>
            <td class="headerCovTableEntryHi">99.2 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2017-02-16</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">17</td>
            <td class="headerCovTableEntry">18</td>
            <td class="headerCovTableEntryHi">94.4 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span><span class="lineCov">          1 : // Copyright 2008 the V8 project authors. All rights reserved.</span></a>
<span class="lineNum">       2 </span><span class="lineCov">          1 : // Redistribution and use in source and binary forms, with or without</span>
<span class="lineNum">       3 </span><span class="lineCov">          1 : // modification, are permitted provided that the following conditions are</span>
<span class="lineNum">       4 </span><span class="lineCov">          1 : // met:</span>
<span class="lineNum">       5 </span><span class="lineCov">          1 : //</span>
<span class="lineNum">       6 </span><span class="lineCov">          1 : //     * Redistributions of source code must retain the above copyright</span>
<span class="lineNum">       7 </span><span class="lineCov">          1 : //       notice, this list of conditions and the following disclaimer.</span>
<span class="lineNum">       8 </span><span class="lineCov">          1 : //     * Redistributions in binary form must reproduce the above</span>
<span class="lineNum">       9 </span><span class="lineCov">          1 : //       copyright notice, this list of conditions and the following</span>
<span class="lineNum">      10 </span><span class="lineCov">          1 : //       disclaimer in the documentation and/or other materials provided</span>
<span class="lineNum">      11 </span><span class="lineCov">          1 : //       with the distribution.</span>
<span class="lineNum">      12 </span><span class="lineCov">          1 : //     * Neither the name of Google Inc. nor the names of its</span>
<span class="lineNum">      13 </span><span class="lineCov">          1 : //       contributors may be used to endorse or promote products derived</span>
<span class="lineNum">      14 </span><span class="lineCov">          1 : //       from this software without specific prior written permission.</span>
<span class="lineNum">      15 </span><span class="lineCov">          1 : //</span>
<span class="lineNum">      16 </span><span class="lineCov">          1 : // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="lineNum">      17 </span><span class="lineCov">          1 : // &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="lineNum">      18 </span><span class="lineCov">          1 : // LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<span class="lineNum">      19 </span><span class="lineCov">          1 : // A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="lineNum">      20 </span><span class="lineCov">          1 : // OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="lineNum">      21 </span><span class="lineCov">          1 : // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="lineNum">      22 </span><span class="lineCov">          1 : // LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<span class="lineNum">      23 </span><span class="lineCov">          1 : // DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<span class="lineNum">      24 </span><span class="lineCov">          1 : // THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="lineNum">      25 </span><span class="lineCov">          1 : // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="lineNum">      26 </span><span class="lineCov">          1 : // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="lineNum">      27 </span><span class="lineCov">          1 : </span>
<a name="28"><span class="lineNum">      28 </span><span class="lineCov">          1 : // Flags: --allow-natives-syntax</span></a>
<span class="lineNum">      29 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      30 </span><span class="lineCov">          1 : function f0() {</span>
<span class="lineNum">      31 </span><span class="lineCov">          1 :   switch (0) {</span>
<span class="lineNum">      32 </span><span class="lineCov">          1 :     // switch deliberately left empty</span>
<span class="lineNum">      33 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">      34 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">      35 </span><span class="lineCov">          1 : </span>
<a name="36"><span class="lineNum">      36 </span><span class="lineCov">          1 : f0();  // no errors</span></a>
<span class="lineNum">      37 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      38 </span><span class="lineCov">          2 : function f1(x) {</span>
<span class="lineNum">      39 </span><span class="lineCov">          2 :   switch (x) {</span>
<span class="lineNum">      40 </span><span class="lineCov">          2 :     default:      return &quot;f1&quot;;</span>
<span class="lineNum">      41 </span><span class="lineCov">          2 :   }</span>
<span class="lineNum">      42 </span><span class="lineCov">          2 :   return &quot;foo&quot;;</span>
<span class="lineNum">      43 </span><span class="lineCov">          2 : }</span>
<span class="lineNum">      44 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      45 </span><span class="lineCov">          1 : assertEquals(&quot;f1&quot;, f1(0), &quot;default-switch.0&quot;);</span>
<a name="46"><span class="lineNum">      46 </span><span class="lineCov">          1 : assertEquals(&quot;f1&quot;, f1(1), &quot;default-switch.1&quot;);</span></a>
<span class="lineNum">      47 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      48 </span><span class="lineCov">         12 : function f2(x) {</span>
<span class="lineNum">      49 </span><span class="lineCov">         12 :   var r;</span>
<span class="lineNum">      50 </span><span class="lineCov">         12 :   switch (x) {</span>
<span class="lineNum">      51 </span><span class="lineCov">         12 :     case 0:</span>
<span class="lineNum">      52 </span><span class="lineCov">         12 :       r = &quot;zero&quot;;</span>
<span class="lineNum">      53 </span><span class="lineCov">         12 :       break;</span>
<span class="lineNum">      54 </span><span class="lineCov">         12 :     case 1:</span>
<span class="lineNum">      55 </span><span class="lineCov">         12 :       r = &quot;one&quot;;</span>
<span class="lineNum">      56 </span><span class="lineCov">         12 :       break;</span>
<span class="lineNum">      57 </span><span class="lineCov">         12 :     case 2:</span>
<span class="lineNum">      58 </span><span class="lineCov">         12 :       r = &quot;two&quot;;</span>
<span class="lineNum">      59 </span><span class="lineCov">         12 :       break;</span>
<span class="lineNum">      60 </span><span class="lineCov">         12 :     case 3:</span>
<span class="lineNum">      61 </span><span class="lineCov">         12 :       r = &quot;three&quot;;</span>
<span class="lineNum">      62 </span><span class="lineCov">         12 :       break;</span>
<span class="lineNum">      63 </span><span class="lineCov">         12 :     default:</span>
<span class="lineNum">      64 </span><span class="lineCov">         12 :       r = &quot;default&quot;;</span>
<span class="lineNum">      65 </span><span class="lineCov">         12 :   }</span>
<span class="lineNum">      66 </span><span class="lineCov">         12 :   return r;</span>
<span class="lineNum">      67 </span><span class="lineCov">         12 : }</span>
<span class="lineNum">      68 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      69 </span><span class="lineCov">          1 : assertEquals(&quot;zero&quot;, f2(0), &quot;0-1-switch.0&quot;);</span>
<span class="lineNum">      70 </span><span class="lineCov">          1 : assertEquals(&quot;one&quot;, f2(1), &quot;0-1-switch.1&quot;);</span>
<span class="lineNum">      71 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(7), &quot;0-1-switch.2&quot;);</span>
<span class="lineNum">      72 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(-1), &quot;0-1-switch.-1&quot;);</span>
<span class="lineNum">      73 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(NaN), &quot;0-1-switch.NaN&quot;);</span>
<span class="lineNum">      74 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(Math.pow(2,34)), &quot;0-1-switch.largeNum&quot;);</span>
<span class="lineNum">      75 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(&quot;0&quot;), &quot;0-1-switch.string&quot;);</span>
<span class="lineNum">      76 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(false), &quot;0-1-switch.bool&quot;);</span>
<span class="lineNum">      77 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(null), &quot;0-1-switch.null&quot;);</span>
<a name="78"><span class="lineNum">      78 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(undefined), &quot;0-1-switch.undef&quot;);</span></a>
<span class="lineNum">      79 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2(new Number(2)), &quot;0-1-switch.undef&quot;);</span>
<span class="lineNum">      80 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f2({valueOf: function(){return 2; }}), &quot;0-1-switch.obj&quot;);</span>
<a name="81"><span class="lineNum">      81 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">      82 </span><span class="lineCov">          1 : </span>
<span class="lineNum">      83 </span><span class="lineCov">          6 : function f3(x, c) {</span>
<span class="lineNum">      84 </span><span class="lineCov">          6 :   var r = 0;</span>
<span class="lineNum">      85 </span><span class="lineCov">          6 :   switch (x) {</span>
<span class="lineNum">      86 </span><span class="lineCov">          6 :     default:</span>
<span class="lineNum">      87 </span><span class="lineCov">          6 :       r = &quot;default&quot;;</span>
<span class="lineNum">      88 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">      89 </span><span class="lineCov">          6 :     case  c:</span>
<span class="lineNum">      90 </span><span class="lineCov">          6 :       r = &quot;value is c = &quot; + c;</span>
<span class="lineNum">      91 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">      92 </span><span class="lineCov">          6 :     case  2:</span>
<span class="lineNum">      93 </span><span class="lineCov">          6 :       r = &quot;two&quot;;</span>
<span class="lineNum">      94 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">      95 </span><span class="lineCov">          6 :     case -5:</span>
<span class="lineNum">      96 </span><span class="lineCov">          6 :       r = &quot;minus 5&quot;;</span>
<span class="lineNum">      97 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">      98 </span><span class="lineCov">          6 :     case  9:</span>
<span class="lineNum">      99 </span><span class="lineCov">          6 :       r = &quot;nine&quot;;</span>
<span class="lineNum">     100 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">     101 </span><span class="lineCov">          6 :   }</span>
<span class="lineNum">     102 </span><span class="lineCov">          6 :   return r;</span>
<span class="lineNum">     103 </span><span class="lineCov">          6 : }</span>
<span class="lineNum">     104 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     105 </span><span class="lineCov">          1 : assertEquals(&quot;two&quot;, f3(2,0), &quot;value-switch.2-0&quot;);</span>
<span class="lineNum">     106 </span><span class="lineCov">          1 : assertEquals(&quot;minus 5&quot;, f3(-5,0), &quot;value-switch.-5-0&quot;);</span>
<span class="lineNum">     107 </span><span class="lineCov">          1 : assertEquals(&quot;nine&quot;, f3(9,0), &quot;value-switch.9-0&quot;);</span>
<span class="lineNum">     108 </span><span class="lineCov">          1 : assertEquals(&quot;value is c = 0&quot;, f3(0,0), &quot;value-switch.0-0&quot;);</span>
<span class="lineNum">     109 </span><span class="lineCov">          1 : assertEquals(&quot;value is c = 2&quot;, f3(2,2), &quot;value-switch.2-2&quot;);</span>
<span class="lineNum">     110 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f3(7,0), &quot;value-switch.7-0&quot;);</span>
<a name="111"><span class="lineNum">     111 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">     112 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     113 </span><span class="lineCov">          4 : function f4(x) {</span>
<span class="lineNum">     114 </span><span class="lineCov">          4 :   switch(x) {</span>
<span class="lineNum">     115 </span><span class="lineCov">          4 :     case 0:</span>
<span class="lineNum">     116 </span><span class="lineCov">          4 :       x++;</span>
<span class="lineNum">     117 </span><span class="lineCov">          4 :     default:</span>
<span class="lineNum">     118 </span><span class="lineCov">          4 :       x++;</span>
<span class="lineNum">     119 </span><span class="lineCov">          4 :     case 2:</span>
<span class="lineNum">     120 </span><span class="lineCov">          4 :       x++;</span>
<span class="lineNum">     121 </span><span class="lineCov">          4 :   }</span>
<span class="lineNum">     122 </span><span class="lineCov">          4 :   return x;</span>
<span class="lineNum">     123 </span><span class="lineCov">          4 : }</span>
<span class="lineNum">     124 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     125 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     126 </span><span class="lineCov">          1 : assertEquals(3, f4(0), &quot;fallthrough-switch.0&quot;);</span>
<span class="lineNum">     127 </span><span class="lineCov">          1 : assertEquals(3, f4(1), &quot;fallthrough-switch.1&quot;);</span>
<span class="lineNum">     128 </span><span class="lineCov">          1 : assertEquals(3, f4(2), &quot;fallthrough-switch.2&quot;);</span>
<a name="129"><span class="lineNum">     129 </span><span class="lineCov">          1 : assertEquals(5, f4(3), &quot;fallthrough-switch.3&quot;);</span></a>
<span class="lineNum">     130 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     131 </span><span class="lineCov">          7 : function f4_string(tag, x) {</span>
<span class="lineNum">     132 </span><span class="lineCov">          7 :   switch(tag) {</span>
<span class="lineNum">     133 </span><span class="lineCov">          7 :     case 'zero':</span>
<span class="lineNum">     134 </span><span class="lineCov">          7 :       x++;</span>
<span class="lineNum">     135 </span><span class="lineCov">          7 :     case 'two':</span>
<span class="lineNum">     136 </span><span class="lineCov">          7 :       x++;</span>
<span class="lineNum">     137 </span><span class="lineCov">          7 :   }</span>
<span class="lineNum">     138 </span><span class="lineCov">          7 :   return x;</span>
<span class="lineNum">     139 </span><span class="lineCov">          7 : }</span>
<span class="lineNum">     140 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     141 </span><span class="lineCov">          1 : // Symbols</span>
<span class="lineNum">     142 </span><span class="lineCov">          1 : assertEquals(2, f4_string('zero', 0), &quot;fallthrough-string-switch.0&quot;);</span>
<span class="lineNum">     143 </span><span class="lineCov">          1 : assertEquals(1, f4_string('one', 1), &quot;fallthrough-string-switch.1&quot;);</span>
<span class="lineNum">     144 </span><span class="lineCov">          1 : assertEquals(3, f4_string('two', 2), &quot;fallthrough-string-switch.2&quot;);</span>
<span class="lineNum">     145 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     146 </span><span class="lineCov">          1 : // Strings</span>
<span class="lineNum">     147 </span><span class="lineCov">          1 : assertEquals(2, f4_string('_zero'.slice(1), 0), &quot;fallthrough-string-switch.3&quot;);</span>
<span class="lineNum">     148 </span><span class="lineCov">          1 : assertEquals(1, f4_string('_one'.slice(1), 1), &quot;fallthrough-string-switch.4&quot;);</span>
<span class="lineNum">     149 </span><span class="lineCov">          1 : assertEquals(3, f4_string('_two'.slice(1), 2), &quot;fallthrough-string-switch.5&quot;);</span>
<span class="lineNum">     150 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     151 </span><span class="lineCov">          1 : // Oddball</span>
<span class="lineNum">     152 </span><span class="lineCov">          1 : assertEquals(3, f4_string(null, 3), &quot;fallthrough-string-switch.6&quot;);</span>
<a name="153"><span class="lineNum">     153 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">     154 </span><span class="lineCov">          1 : // Test for regression</span>
<span class="lineNum">     155 </span><span class="lineCov">          1 : function regress_string(value) {</span>
<span class="lineNum">     156 </span><span class="lineCov">          1 :   var json = 1;</span>
<span class="lineNum">     157 </span><span class="lineCov">          1 :   switch (typeof value) {</span>
<span class="lineNum">     158 </span><span class="lineCov">          1 :     case 'object':</span>
<span class="lineNum">     159 </span><span class="lineCov">          1 :       break;</span>
<span class="lineNum">     160 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     161 </span><span class="lineCov">          1 :     default:</span>
<span class="lineNum">     162 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     163 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     164 </span><span class="lineCov">          1 :   return json;</span>
<span class="lineNum">     165 </span><span class="lineCov">          1 : };</span>
<a name="166"><span class="lineNum">     166 </span><span class="lineCov">          1 : assertEquals(1, regress_string('object'), 'regression-string');</span></a>
<span class="lineNum">     167 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     168 </span><span class="lineCov">          5 : function f5(x) {</span>
<span class="lineNum">     169 </span><span class="lineCov">          5 :   switch(x) {</span>
<span class="lineNum">     170 </span><span class="lineCov">          5 :      case -2: return true;</span>
<span class="lineNum">     171 </span><span class="lineCov">          5 :      case -1: return false;</span>
<span class="lineNum">     172 </span><span class="lineCov">          5 :      case 0: return true;</span>
<span class="lineNum">     173 </span><span class="lineCov">          5 :      case 2: return false;</span>
<span class="lineNum">     174 </span><span class="lineCov">          5 :      default: return 42;</span>
<span class="lineNum">     175 </span><span class="lineCov">          5 :   }</span>
<span class="lineNum">     176 </span><span class="lineCov">          5 : }</span>
<span class="lineNum">     177 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     178 </span><span class="lineCov">          1 : assertTrue(f5(-2), &quot;negcase.-2&quot;);</span>
<span class="lineNum">     179 </span><span class="lineCov">          1 : assertFalse(f5(-1), &quot;negcase.-1&quot;);</span>
<span class="lineNum">     180 </span><span class="lineCov">          1 : assertTrue(f5(0), &quot;negcase.-0&quot;);</span>
<span class="lineNum">     181 </span><span class="lineCov">          1 : assertEquals(42, f5(1), &quot;negcase.1&quot;);</span>
<a name="182"><span class="lineNum">     182 </span><span class="lineCov">          1 : assertFalse(f5(2), &quot;negcase.2&quot;);</span></a>
<span class="lineNum">     183 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     184 </span><span class="lineCov">          4 : function f6(N) {</span>
<span class="lineNum">     185 </span><span class="lineCov">          4 :   // long enough case that code buffer grows during code-generation</span>
<span class="lineNum">     186 </span><span class="lineCov">          4 :   var res = 0;</span>
<span class="lineNum">     187 </span><span class="lineCov">          4 :   for(var i = 0; i &lt; N; i++) {</span>
<span class="lineNum">     188 </span><span class="lineCov">          4 :     switch(i &amp; 0x3f) {</span>
<span class="lineNum">     189 </span><span class="lineCov">          4 :     case 0: res += 0; break;</span>
<span class="lineNum">     190 </span><span class="lineCov">          4 :     case 1: res += 1; break;</span>
<span class="lineNum">     191 </span><span class="lineCov">          4 :     case 2: res += 2; break;</span>
<span class="lineNum">     192 </span><span class="lineCov">          4 :     case 3: res += 3; break;</span>
<span class="lineNum">     193 </span><span class="lineCov">          4 :     case 4: res += 4; break;</span>
<span class="lineNum">     194 </span><span class="lineCov">          4 :     case 5: res += 5; break;</span>
<span class="lineNum">     195 </span><span class="lineCov">          4 :     case 6: res += 6; break;</span>
<span class="lineNum">     196 </span><span class="lineCov">          4 :     case 7: res += 7; break;</span>
<span class="lineNum">     197 </span><span class="lineCov">          4 :     case 8: res += 8; break;</span>
<span class="lineNum">     198 </span><span class="lineCov">          4 :     case 9: res += 9; break;</span>
<span class="lineNum">     199 </span><span class="lineCov">          4 :     case 10: res += 10; break;</span>
<span class="lineNum">     200 </span><span class="lineCov">          4 :     case 11: res += 11; break;</span>
<span class="lineNum">     201 </span><span class="lineCov">          4 :     case 12: res += 12; break;</span>
<span class="lineNum">     202 </span><span class="lineCov">          4 :     case 13: res += 13; break;</span>
<span class="lineNum">     203 </span><span class="lineCov">          4 :     case 14: res += 14; break;</span>
<span class="lineNum">     204 </span><span class="lineCov">          4 :     case 15: res += 15; break;</span>
<span class="lineNum">     205 </span><span class="lineCov">          4 :     case 16: res += 16; break;</span>
<span class="lineNum">     206 </span><span class="lineCov">          4 :     case 17: res += 17; break;</span>
<span class="lineNum">     207 </span><span class="lineCov">          4 :     case 18: res += 18; break;</span>
<span class="lineNum">     208 </span><span class="lineCov">          4 :     case 19: res += 19; break;</span>
<span class="lineNum">     209 </span><span class="lineCov">          4 :     case 20: res += 20; break;</span>
<span class="lineNum">     210 </span><span class="lineCov">          4 :     case 21: res += 21; break;</span>
<span class="lineNum">     211 </span><span class="lineCov">          4 :     case 22: res += 22; break;</span>
<span class="lineNum">     212 </span><span class="lineCov">          4 :     case 23: res += 23; break;</span>
<span class="lineNum">     213 </span><span class="lineCov">          4 :     case 24: res += 24; break;</span>
<span class="lineNum">     214 </span><span class="lineCov">          4 :     case 25: res += 25; break;</span>
<span class="lineNum">     215 </span><span class="lineCov">          4 :     case 26: res += 26; break;</span>
<span class="lineNum">     216 </span><span class="lineCov">          4 :     case 27: res += 27; break;</span>
<span class="lineNum">     217 </span><span class="lineCov">          4 :     case 28: res += 28; break;</span>
<span class="lineNum">     218 </span><span class="lineCov">          4 :     case 29: res += 29; break;</span>
<span class="lineNum">     219 </span><span class="lineCov">          4 :     case 30: res += 30; break;</span>
<span class="lineNum">     220 </span><span class="lineCov">          4 :     case 31: res += 31; break;</span>
<span class="lineNum">     221 </span><span class="lineCov">          4 :     case 32: res += 32; break;</span>
<span class="lineNum">     222 </span><span class="lineCov">          4 :     case 33: res += 33; break;</span>
<span class="lineNum">     223 </span><span class="lineCov">          4 :     case 34: res += 34; break;</span>
<span class="lineNum">     224 </span><span class="lineCov">          4 :     case 35: res += 35; break;</span>
<span class="lineNum">     225 </span><span class="lineCov">          4 :     case 36: res += 36; break;</span>
<span class="lineNum">     226 </span><span class="lineCov">          4 :     case 37: res += 37; break;</span>
<span class="lineNum">     227 </span><span class="lineCov">          4 :     case 38: res += 38; break;</span>
<span class="lineNum">     228 </span><span class="lineCov">          4 :     case 39: res += 39; break;</span>
<span class="lineNum">     229 </span><span class="lineCov">          4 :     case 40: res += 40; break;</span>
<span class="lineNum">     230 </span><span class="lineCov">          4 :     case 41: res += 41; break;</span>
<span class="lineNum">     231 </span><span class="lineCov">          4 :     case 42: res += 42; break;</span>
<span class="lineNum">     232 </span><span class="lineCov">          4 :     case 43: res += 43; break;</span>
<span class="lineNum">     233 </span><span class="lineCov">          4 :     case 44: res += 44; break;</span>
<span class="lineNum">     234 </span><span class="lineCov">          4 :     case 45: res += 45; break;</span>
<span class="lineNum">     235 </span><span class="lineCov">          4 :     case 46: res += 46; break;</span>
<span class="lineNum">     236 </span><span class="lineCov">          4 :     case 47: res += 47; break;</span>
<span class="lineNum">     237 </span><span class="lineCov">          4 :     case 48: res += 48; break;</span>
<span class="lineNum">     238 </span><span class="lineCov">          4 :     case 49: res += 49; break;</span>
<span class="lineNum">     239 </span><span class="lineCov">          4 :     case 50: res += 50; break;</span>
<span class="lineNum">     240 </span><span class="lineCov">          4 :     case 51: res += 51; break;</span>
<span class="lineNum">     241 </span><span class="lineCov">          4 :     case 52: res += 52; break;</span>
<span class="lineNum">     242 </span><span class="lineCov">          4 :     case 53: res += 53; break;</span>
<span class="lineNum">     243 </span><span class="lineCov">          4 :     case 54: res += 54; break;</span>
<span class="lineNum">     244 </span><span class="lineCov">          4 :     case 55: res += 55; break;</span>
<span class="lineNum">     245 </span><span class="lineCov">          4 :     case 56: res += 56; break;</span>
<span class="lineNum">     246 </span><span class="lineCov">          4 :     case 57: res += 57; break;</span>
<span class="lineNum">     247 </span><span class="lineCov">          4 :     case 58: res += 58; break;</span>
<span class="lineNum">     248 </span><span class="lineCov">          4 :     case 59: res += 59; break;</span>
<span class="lineNum">     249 </span><span class="lineCov">          4 :     case 60: res += 60; break;</span>
<span class="lineNum">     250 </span><span class="lineCov">          4 :     case 61: res += 61; break;</span>
<span class="lineNum">     251 </span><span class="lineCov">          4 :     case 62: res += 62; break;</span>
<span class="lineNum">     252 </span><span class="lineCov">          4 :     case 63: res += 63; break;</span>
<span class="lineNum">     253 </span><span class="lineCov">          4 :     case 64: break;</span>
<span class="lineNum">     254 </span><span class="lineCov">          4 :     default: break;</span>
<span class="lineNum">     255 </span><span class="lineCov">          4 :     }</span>
<span class="lineNum">     256 </span><span class="lineCov">          4 :   }</span>
<span class="lineNum">     257 </span><span class="lineCov">          4 :   return res;</span>
<span class="lineNum">     258 </span><span class="lineCov">          4 : }</span>
<span class="lineNum">     259 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     260 </span><span class="lineCov">          1 : assertEquals(190, f6(20), &quot;largeSwitch.20&quot;);</span>
<span class="lineNum">     261 </span><span class="lineCov">          1 : assertEquals(2016, f6(64), &quot;largeSwitch.64&quot;);</span>
<span class="lineNum">     262 </span><span class="lineCov">          1 : assertEquals(4032, f6(128), &quot;largeSwitch.128&quot;);</span>
<span class="lineNum">     263 </span><span class="lineCov">          1 : assertEquals(4222, f6(148), &quot;largeSwitch.148&quot;);</span>
<a name="264"><span class="lineNum">     264 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">     265 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     266 </span><span class="lineCov">          7 : function f7(value) {</span>
<span class="lineNum">     267 </span><span class="lineCov">          7 :   switch (value) {</span>
<span class="lineNum">     268 </span><span class="lineCov">          7 :   case 0: return &quot;0&quot;;</span>
<span class="lineNum">     269 </span><span class="lineCov">          7 :   case -0: return &quot;-0&quot;;</span>
<span class="lineNum">     270 </span><span class="lineCov">          7 :   case 1: case 2: case 3: case 4:  // Dummy fillers.</span>
<span class="lineNum">     271 </span><span class="lineCov">          7 :   }</span>
<span class="lineNum">     272 </span><span class="lineCov">          7 :   switch (value) {</span>
<span class="lineNum">     273 </span><span class="lineCov">          7 :   case 0x3fffffff: return &quot;MaxSmi&quot;;</span>
<span class="lineNum">     274 </span><span class="lineCov">          7 :   case 0x3ffffffe:</span>
<span class="lineNum">     275 </span><span class="lineCov">          7 :   case 0x3ffffffd:</span>
<span class="lineNum">     276 </span><span class="lineCov">          7 :   case 0x3ffffffc:</span>
<span class="lineNum">     277 </span><span class="lineCov">          7 :   case 0x3ffffffb:</span>
<span class="lineNum">     278 </span><span class="lineCov">          7 :   case 0x3ffffffa:  // Dummy fillers</span>
<span class="lineNum">     279 </span><span class="lineCov">          7 :   }</span>
<span class="lineNum">     280 </span><span class="lineCov">          7 :   switch (value) {</span>
<span class="lineNum">     281 </span><span class="lineCov">          7 :   case -0x40000000: return &quot;MinSmi&quot;;</span>
<span class="lineNum">     282 </span><span class="lineCov">          7 :   case -0x3fffffff:</span>
<span class="lineNum">     283 </span><span class="lineCov">          7 :   case -0x3ffffffe:</span>
<span class="lineNum">     284 </span><span class="lineCov">          7 :   case -0x3ffffffd:</span>
<span class="lineNum">     285 </span><span class="lineCov">          7 :   case -0x3ffffffc:</span>
<span class="lineNum">     286 </span><span class="lineCov">          7 :   case -0x3ffffffb:  // Dummy fillers</span>
<span class="lineNum">     287 </span><span class="lineCov">          7 :   }</span>
<span class="lineNum">     288 </span><span class="lineCov">          7 :   switch (value) {</span>
<span class="lineNum">     289 </span><span class="lineCov">          7 :   case 10: return &quot;A&quot;;</span>
<span class="lineNum">     290 </span><span class="lineCov">          7 :   case 11:</span>
<span class="lineNum">     291 </span><span class="lineCov">          7 :   case 12:</span>
<span class="lineNum">     292 </span><span class="lineCov">          7 :   case 13:</span>
<span class="lineNum">     293 </span><span class="lineCov">          7 :   case 14:</span>
<span class="lineNum">     294 </span><span class="lineCov">          7 :   case 15:  // Dummy fillers</span>
<span class="lineNum">     295 </span><span class="lineCov">          7 :   }</span>
<span class="lineNum">     296 </span><span class="lineCov">          7 :   return &quot;default&quot;;</span>
<span class="lineNum">     297 </span><span class="lineCov">          7 : }</span>
<span class="lineNum">     298 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     299 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     300 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f7(0.1), &quot;0-1-switch.double-0.1&quot;);</span>
<span class="lineNum">     301 </span><span class="lineCov">          1 : assertEquals(&quot;0&quot;, f7(-0), &quot;0-1-switch.double-neg0&quot;);</span>
<span class="lineNum">     302 </span><span class="lineCov">          1 : assertEquals(&quot;MaxSmi&quot;, f7((1&lt;&lt;30)-1), &quot;0-1-switch.maxsmi&quot;);</span>
<span class="lineNum">     303 </span><span class="lineCov">          1 : assertEquals(&quot;MinSmi&quot;, f7(-(1&lt;&lt;30)), &quot;0-1-switch.minsmi&quot;);</span>
<span class="lineNum">     304 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f7(1&lt;&lt;30), &quot;0-1-switch.maxsmi++&quot;);</span>
<span class="lineNum">     305 </span><span class="lineCov">          1 : assertEquals(&quot;default&quot;, f7(-(1&lt;&lt;30)-1), &quot;0-1-switch.minsmi--&quot;);</span>
<span class="lineNum">     306 </span><span class="lineCov">          1 : assertEquals(&quot;A&quot;, f7((170/16)-(170%16/16)), &quot;0-1-switch.heapnum&quot;);</span>
<a name="307"><span class="lineNum">     307 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">     308 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     309 </span><span class="lineCov">          1 : function makeVeryLong(length) {</span>
<span class="lineNum">     310 </span><span class="lineCov">          1 :   var res = &quot;(function () {\n&quot; +</span>
<span class="lineNum">     311 </span><span class="lineCov">          1 :             &quot;  var res = 0;\n&quot; +</span>
<span class="lineNum">     312 </span><span class="lineCov">          1 :             &quot;  for (var i = 0; i &lt;= &quot; + length + &quot;; i++) {\n&quot; +</span>
<span class="lineNum">     313 </span><span class="lineCov">          1 :             &quot;    switch(i) {\n&quot;;</span>
<span class="lineNum">     314 </span><span class="lineCov">          1 :   for (var i = 0; i &lt; length; i++) {</span>
<span class="lineNum">     315 </span><span class="lineCov">          1 :     res += &quot;    case &quot; + i + &quot;: res += 2; break;\n&quot;;</span>
<span class="lineNum">     316 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     317 </span><span class="lineCov">          1 :   res += &quot;    default: res += 1;\n&quot; +</span>
<span class="lineNum">     318 </span><span class="lineCov">          1 :          &quot;    }\n&quot; +</span>
<span class="lineNum">     319 </span><span class="lineCov">          1 :          &quot;  }\n&quot; +</span>
<span class="lineNum">     320 </span><span class="lineCov">          1 :          &quot;  return res;\n&quot; +</span>
<span class="lineNum">     321 </span><span class="lineCov">          1 :          &quot;})&quot;;</span>
<span class="lineNum">     322 </span><span class="lineCov">          1 :   return eval(res);</span>
<span class="lineNum">     323 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     324 </span><span class="lineCov">          1 : var verylong_size = 1000;</span>
<span class="lineNum">     325 </span><span class="lineCov">          1 : var verylong = makeVeryLong(verylong_size);</span>
<span class="lineNum">     326 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     327 </span><span class="lineCov">          1 : assertEquals(verylong_size * 2 + 1, verylong());</span>
<span class="lineNum">     328 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     329 </span><span class="lineCov">          1 : //</span>
<span class="lineNum">     330 </span><span class="lineCov">          1 : // Test suite below aims to cover all possible combinations of following:</span>
<span class="lineNum">     331 </span><span class="lineCov">          1 : //</span>
<span class="lineNum">     332 </span><span class="lineCov">          1 : //  clauses  |   tags   |   type feedback   |  optimization</span>
<span class="lineNum">     333 </span><span class="lineCov">          1 : // =========================================================</span>
<span class="lineNum">     334 </span><span class="lineCov">          1 : //  strings  |  symbol  |     all           |      on</span>
<span class="lineNum">     335 </span><span class="lineCov">          1 : //  smis     |  string  |     target        |      off</span>
<span class="lineNum">     336 </span><span class="lineCov">          1 : //  mixed    |  oddball |     non-target    |</span>
<span class="lineNum">     337 </span><span class="lineCov">          1 : //           |  smis    |     none          |</span>
<span class="lineNum">     338 </span><span class="lineCov">          1 : //           |  heapnum |                   |</span>
<span class="lineNum">     339 </span><span class="lineCov">          1 : // =========================================================</span>
<span class="lineNum">     340 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     341 </span><span class="lineCov">          1 : // Function-with-switch generator</span>
<span class="lineNum">     342 </span><span class="lineCov">          1 : var test_id = 0,</span>
<span class="lineNum">     343 </span><span class="lineCov">          1 :     clause_values = {</span>
<span class="lineNum">     344 </span><span class="lineCov">          1 :       string: ['abc', 'def', 'ghi', 'jkl'],</span>
<span class="lineNum">     345 </span><span class="lineCov">          1 :       smi: [1, 2, 3, 4],</span>
<span class="lineNum">     346 </span><span class="lineCov">          1 :       mixed: ['abc', 1, 'def', 2, 'ghi', 3, 'jkl', 4]</span>
<a name="347"><span class="lineNum">     347 </span><span class="lineCov">          1 :     };</span></a>
<span class="lineNum">     348 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     349 </span><span class="lineCov">        380 : function switch_gen(clause_type, feedback, optimize) {</span>
<a name="350"><span class="lineNum">     350 </span><span class="lineCov">        380 :   var values = clause_values[clause_type];</span></a>
<span class="lineNum">     351 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     352 </span><span class="lineCov">        380 :   function opt(fn) {</span>
<span class="lineNum">     353 </span><span class="lineCov">        380 :     if (feedback === 'all') {</span>
<span class="lineNum">     354 </span><span class="lineCov">        380 :       values.forEach(fn);</span>
<span class="lineNum">     355 </span><span class="lineCov">        380 :     } else if (Array.isArray(feedback)) {</span>
<span class="lineNum">     356 </span><span class="lineCov">        380 :       // Non-target</span>
<span class="lineNum">     357 </span><span class="lineCov">        960 :       values.filter(function(v) {</span>
<span class="lineNum">     358 </span><span class="lineCov">        960 :         return feedback.indexOf(v) === -1;</span>
<span class="lineNum">     359 </span><span class="lineCov">        960 :       }).forEach(fn);</span>
<span class="lineNum">     360 </span><span class="lineCov">        380 :     } else if (feedback !== undefined) {</span>
<span class="lineNum">     361 </span><span class="lineCov">        380 :       // Target</span>
<span class="lineNum">     362 </span><span class="lineCov">        380 :       fn(feedback);</span>
<span class="lineNum">     363 </span><span class="lineCov">        380 :     } else {</span>
<span class="lineNum">     364 </span><span class="lineCov">        380 :       // None</span>
<span class="lineNum">     365 </span><span class="lineCov">        380 :     }</span>
<span class="lineNum">     366 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     367 </span><span class="lineCov">        380 :     if (optimize) %OptimizeFunctionOnNextCall(fn);</span>
<span class="lineNum">     368 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     369 </span><span class="lineCov">        380 :     return fn;</span>
<span class="lineNum">     370 </span><span class="lineCov">        380 :   };</span>
<span class="lineNum">     371 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     372 </span><span class="lineCov">        380 :   return opt(new Function(</span>
<span class="lineNum">     373 </span><span class="lineCov">        380 :       'tag',</span>
<span class="lineNum">     374 </span><span class="lineCov">        380 :       '&quot;' + (test_id++) + '&quot;;' +</span>
<span class="lineNum">     375 </span><span class="lineCov">        380 :       'switch(tag) {' +</span>
<span class="lineNum">     376 </span><span class="lineCov">       2240 :       values.map(function(value) {</span>
<span class="lineNum">     377 </span><span class="lineCov">       2240 :         return 'case ' + JSON.stringify(value) + ': return' +</span>
<span class="lineNum">     378 </span><span class="lineCov">       2240 :                JSON.stringify('ok-' + value);</span>
<span class="lineNum">     379 </span><span class="lineCov">       2240 :       }).join(';') +</span>
<span class="lineNum">     380 </span><span class="lineCov">        380 :       '}'</span>
<span class="lineNum">     381 </span><span class="lineCov">        380 :   ));</span>
<a name="382"><span class="lineNum">     382 </span><span class="lineCov">        380 : };</span></a>
<span class="lineNum">     383 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     384 </span><span class="lineCov">        380 : function test_switch(clause_type, test_type, feedback, optimize) {</span>
<span class="lineNum">     385 </span><span class="lineCov">        380 :   var pairs = [],</span>
<span class="lineNum">     386 </span><span class="lineCov">        380 :       fn = switch_gen(clause_type, feedback, optimize);</span>
<span class="lineNum">     387 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     388 </span><span class="lineCov">        380 :   if (Array.isArray(test_type)) {</span>
<span class="lineNum">     389 </span><span class="lineCov">        380 :     pairs = test_type.map(function(v) {</span>
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :       return {</span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :         value: v,</span>
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :         expected: 'ok-' + v</span>
<span class="lineNum">     393 </span><span class="lineNoCov">          0 :       };</span>
<span class="lineNum">     394 </span><span class="lineCov">        380 :     });</span>
<span class="lineNum">     395 </span><span class="lineCov">        380 :   } else if (test_type === 'symbols') {</span>
<span class="lineNum">     396 </span><span class="lineCov">        380 :     pairs = clause_values.string.map(function(v) {</span>
<span class="lineNum">     397 </span><span class="lineCov">        304 :       return {</span>
<span class="lineNum">     398 </span><span class="lineCov">        304 :         value: v,</span>
<span class="lineNum">     399 </span><span class="lineCov">        304 :         expected: clause_type !== 'smi' ? 'ok-' + v : undefined</span>
<span class="lineNum">     400 </span><span class="lineCov">        304 :       };</span>
<span class="lineNum">     401 </span><span class="lineCov">        380 :     });</span>
<span class="lineNum">     402 </span><span class="lineCov">        380 :   } else if (test_type === 'strings') {</span>
<span class="lineNum">     403 </span><span class="lineCov">        380 :     pairs = clause_values.string.map(function(v) {</span>
<span class="lineNum">     404 </span><span class="lineCov">        304 :       return {</span>
<span class="lineNum">     405 </span><span class="lineCov">        304 :         value: ('%%' + v).slice(2),</span>
<span class="lineNum">     406 </span><span class="lineCov">        304 :         expected: clause_type !== 'smi' ? 'ok-' + v : undefined</span>
<span class="lineNum">     407 </span><span class="lineCov">        304 :       };</span>
<span class="lineNum">     408 </span><span class="lineCov">        380 :     });</span>
<span class="lineNum">     409 </span><span class="lineCov">        380 :   } else if (test_type === 'oddball') {</span>
<span class="lineNum">     410 </span><span class="lineCov">        380 :     pairs = [</span>
<span class="lineNum">     411 </span><span class="lineCov">        380 :       { value: null, expected: undefined },</span>
<span class="lineNum">     412 </span><span class="lineCov">        380 :       { value: NaN, expected: undefined },</span>
<span class="lineNum">     413 </span><span class="lineCov">        380 :       { value: undefined, expected: undefined }</span>
<span class="lineNum">     414 </span><span class="lineCov">        380 :     ];</span>
<span class="lineNum">     415 </span><span class="lineCov">        380 :   } else if (test_type === 'smi') {</span>
<span class="lineNum">     416 </span><span class="lineCov">        380 :     pairs = clause_values.smi.map(function(v) {</span>
<span class="lineNum">     417 </span><span class="lineCov">        304 :       return {</span>
<span class="lineNum">     418 </span><span class="lineCov">        304 :         value: v,</span>
<span class="lineNum">     419 </span><span class="lineCov">        304 :         expected: clause_type !== 'string' ? 'ok-' + v : undefined</span>
<span class="lineNum">     420 </span><span class="lineCov">        304 :       };</span>
<span class="lineNum">     421 </span><span class="lineCov">        380 :     });</span>
<span class="lineNum">     422 </span><span class="lineCov">        380 :   } else if (test_type === 'heapnum') {</span>
<span class="lineNum">     423 </span><span class="lineCov">        380 :     pairs = clause_values.smi.map(function(v) {</span>
<span class="lineNum">     424 </span><span class="lineCov">        304 :       return {</span>
<span class="lineNum">     425 </span><span class="lineCov">        304 :         value: ((v * 17)/16) - ((v*17)%16/16),</span>
<span class="lineNum">     426 </span><span class="lineCov">        304 :         expected: clause_type !== 'string' ? 'ok-' + v : undefined</span>
<span class="lineNum">     427 </span><span class="lineCov">        304 :       };</span>
<span class="lineNum">     428 </span><span class="lineCov">        380 :     });</span>
<span class="lineNum">     429 </span><span class="lineCov">        380 :   }</span>
<span class="lineNum">     430 </span><span class="lineCov">        380 : </span>
<span class="lineNum">     431 </span><span class="lineCov">       1444 :   pairs.forEach(function(pair) {</span>
<span class="lineNum">     432 </span><span class="lineCov">       1444 :     assertEquals(fn(pair.value), pair.expected);</span>
<span class="lineNum">     433 </span><span class="lineCov">       1444 :   });</span>
<span class="lineNum">     434 </span><span class="lineCov">        380 : };</span>
<span class="lineNum">     435 </span><span class="lineCov">          1 : </span>
<a name="436"><span class="lineNum">     436 </span><span class="lineCov">          1 : // test_switch(clause_type, test_type, feedback, optimize);</span></a>
<span class="lineNum">     437 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     438 </span><span class="lineCov">          2 : function test_switches(opt) {</span>
<a name="439"><span class="lineNum">     439 </span><span class="lineCov">          2 :   var test_types = ['symbols', 'strings', 'oddball', 'smi', 'heapnum'];</span></a>
<span class="lineNum">     440 </span><span class="lineCov">          2 : </span>
<span class="lineNum">     441 </span><span class="lineCov">          6 :   function test(clause_type) {</span>
<span class="lineNum">     442 </span><span class="lineCov">          6 :     var values = clause_values[clause_type];</span>
<span class="lineNum">     443 </span><span class="lineCov">          6 : </span>
<span class="lineNum">     444 </span><span class="lineCov">         30 :     test_types.forEach(function(test_type) {</span>
<span class="lineNum">     445 </span><span class="lineCov">         30 :       test_switch(clause_type, test_type, 'all', opt);</span>
<span class="lineNum">     446 </span><span class="lineCov">         30 :       test_switch(clause_type, test_type, 'none', opt);</span>
<span class="lineNum">     447 </span><span class="lineCov">         30 : </span>
<span class="lineNum">     448 </span><span class="lineCov">         30 :       // Targeting specific clause feedback</span>
<span class="lineNum">     449 </span><span class="lineCov">        160 :       values.forEach(function(value) {</span>
<span class="lineNum">     450 </span><span class="lineCov">        160 :         test_switch(clause_type, test_type, [value], value, opt);</span>
<span class="lineNum">     451 </span><span class="lineCov">        160 :         test_switch(clause_type, test_type, value, value, opt);</span>
<span class="lineNum">     452 </span><span class="lineCov">        160 :       });</span>
<span class="lineNum">     453 </span><span class="lineCov">         30 :     });</span>
<span class="lineNum">     454 </span><span class="lineCov">          6 :   };</span>
<span class="lineNum">     455 </span><span class="lineCov">          2 : </span>
<span class="lineNum">     456 </span><span class="lineCov">          2 :   test('string');</span>
<span class="lineNum">     457 </span><span class="lineCov">          2 :   test('smi');</span>
<span class="lineNum">     458 </span><span class="lineCov">          2 :   test('mixed');</span>
<span class="lineNum">     459 </span><span class="lineCov">          2 : };</span>
<span class="lineNum">     460 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     461 </span><span class="lineCov">          1 : test_switches(false);</span>
<span class="lineNum">     462 </span><span class="lineCov">          1 : test_switches(true);</span>
<span class="lineNum">     463 </span><span class="lineCov">          1 : </span>
<a name="464"><span class="lineNum">     464 </span><span class="lineCov">          1 : </span></a>
<span class="lineNum">     465 </span><span class="lineCov">          1 : // Test labeled and anonymous breaks in switch statements</span>
<span class="lineNum">     466 </span><span class="lineCov">          1 : (function test_switch_break() {</span>
<span class="lineNum">     467 </span><span class="lineCov">          1 :   A: for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     468 </span><span class="lineCov">          1 :     switch (i) {</span>
<span class="lineNum">     469 </span><span class="lineCov">          1 :       case 1:</span>
<span class="lineNum">     470 </span><span class="lineCov">          1 :         break A;</span>
<span class="lineNum">     471 </span><span class="lineCov">          1 :     }</span>
<span class="lineNum">     472 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     473 </span><span class="lineCov">          1 :   assertEquals(1, i);</span>
<span class="lineNum">     474 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     475 </span><span class="lineCov">          1 :   for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     476 </span><span class="lineCov">          1 :     B: switch (i) {</span>
<span class="lineNum">     477 </span><span class="lineCov">          1 :       case 1:</span>
<span class="lineNum">     478 </span><span class="lineCov">          1 :         break B;</span>
<span class="lineNum">     479 </span><span class="lineCov">          1 :     }</span>
<span class="lineNum">     480 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     481 </span><span class="lineCov">          1 :   assertEquals(10, i);</span>
<span class="lineNum">     482 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     483 </span><span class="lineCov">          1 :   for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     484 </span><span class="lineCov">          1 :     switch (i) {</span>
<span class="lineNum">     485 </span><span class="lineCov">          1 :       case 1:</span>
<span class="lineNum">     486 </span><span class="lineCov">          1 :         break;</span>
<span class="lineNum">     487 </span><span class="lineCov">          1 :     }</span>
<span class="lineNum">     488 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     489 </span><span class="lineCov">          1 :   assertEquals(10, i);</span>
<span class="lineNum">     490 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     491 </span><span class="lineCov">          1 :   switch (1) {</span>
<span class="lineNum">     492 </span><span class="lineCov">          1 :     case 1:</span>
<span class="lineNum">     493 </span><span class="lineCov">          1 :       C: for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     494 </span><span class="lineCov">          1 :         break C;</span>
<span class="lineNum">     495 </span><span class="lineCov">          1 :       }</span>
<span class="lineNum">     496 </span><span class="lineCov">          1 :       i = 2;</span>
<span class="lineNum">     497 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     498 </span><span class="lineCov">          1 :   assertEquals(2, i);</span>
<span class="lineNum">     499 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     500 </span><span class="lineCov">          1 :   switch (1) {</span>
<span class="lineNum">     501 </span><span class="lineCov">          1 :     case 1:</span>
<span class="lineNum">     502 </span><span class="lineCov">          1 :       for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     503 </span><span class="lineCov">          1 :         break;</span>
<span class="lineNum">     504 </span><span class="lineCov">          1 :       }</span>
<span class="lineNum">     505 </span><span class="lineCov">          1 :       i = 2;</span>
<span class="lineNum">     506 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     507 </span><span class="lineCov">          1 :   assertEquals(2, i);</span>
<span class="lineNum">     508 </span><span class="lineCov">          1 : </span>
<span class="lineNum">     509 </span><span class="lineCov">          1 :   D: switch (1) {</span>
<span class="lineNum">     510 </span><span class="lineCov">          1 :     case 1:</span>
<span class="lineNum">     511 </span><span class="lineCov">          1 :       for (var i = 1; i &lt; 10; i++) {</span>
<span class="lineNum">     512 </span><span class="lineCov">          1 :         break D;</span>
<span class="lineNum">     513 </span><span class="lineCov">          1 :       }</span>
<span class="lineNum">     514 </span><span class="lineCov">          1 :       i = 2;</span>
<span class="lineNum">     515 </span><span class="lineCov">          1 :   }</span>
<span class="lineNum">     516 </span><span class="lineCov">          1 :   assertEquals(1, i);</span>
<span class="lineNum">     517 </span><span class="lineCov">          1 : })();</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
